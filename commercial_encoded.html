<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Create and style clusters</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>

    <script>
       const _0x1f29d7=_0x1880;function _0x4b47(){const _0x29f124=['216ZEPieu','503832zxCvsb','381143tiMFPf','collection','#f28cb1','easeTo','points','log','#f1f075','1011820LIYOFq','sun','addLayer','coordinates','48567EKSeCU','properties','map','unclustered-point','geojson','setData','earthquakes','featureCollection','mapbox://styles/mapbox/satellite-v9','cluster-count','{point_count_abbreviated}','clusters','addImage','3178686NViJgY','point','Arial\x20Unicode\x20MS\x20Bold','locations','#11b4da','pk.eyJ1Ijoic2VyZ2JlciIsImEiOiJja3dwOWgzeGQwYWdyMm9xb2pkMDFvYmNuIn0.H9AJ_NLmDNYMed6dvu_Q0A','156SGoWNg','loadImage','has','circle','#51bbd6','symbol','get','6010vWdAxA','icons/sun_blue.png','39168piWDPa','cluster_id','step','click','point_count','geometry','getSource','https://docs.google.com/spreadsheets/d/e/2PACX-1vR_ENl3Ork4iwRyofHpX3wl3cqWG7jKvx29IJ14SkcbCighLwGfsqsPdULh1OlSRQ/pub?gid=1880962136&single=true&output=csv','lng','csv','load','#fff','addSource','1078148gVQBAZ'];_0x4b47=function(){return _0x29f124;};return _0x4b47();}function _0x1880(_0x323e50,_0x143160){const _0x4b476d=_0x4b47();return _0x1880=function(_0x188025,_0x2e724b){_0x188025=_0x188025-0x64;let _0x2309da=_0x4b476d[_0x188025];return _0x2309da;},_0x1880(_0x323e50,_0x143160);}(function(_0x5e941b,_0x334bf7){const _0x3f3965=_0x1880,_0x2ded0a=_0x5e941b();while(!![]){try{const _0x5cffef=parseInt(_0x3f3965(0x77))/0x1+-parseInt(_0x3f3965(0x96))/0x2*(parseInt(_0x3f3965(0x83))/0x3)+-parseInt(_0x3f3965(0x75))/0x4+parseInt(_0x3f3965(0x7f))/0x5+parseInt(_0x3f3965(0x90))/0x6+-parseInt(_0x3f3965(0x78))/0x7*(parseInt(_0x3f3965(0x76))/0x8)+parseInt(_0x3f3965(0x68))/0x9*(parseInt(_0x3f3965(0x66))/0xa);if(_0x5cffef===_0x334bf7)break;else _0x2ded0a['push'](_0x2ded0a['shift']());}catch(_0x44cdcc){_0x2ded0a['push'](_0x2ded0a['shift']());}}}(_0x4b47,0xcf4e7),mapboxgl['accessToken']=_0x1f29d7(0x95));const map=new mapboxgl['Map']({'container':'map','style':_0x1f29d7(0x8b),'center':{'lng':-73.13418432616481,'lat':40.71282821016831},'zoom':0x8});map['on'](_0x1f29d7(0x72),()=>{const _0x569e5c=_0x1f29d7;map[_0x569e5c(0x97)](_0x569e5c(0x67),(_0x42d119,_0x23b05b)=>{const _0x12940a=_0x569e5c;if(_0x42d119)throw _0x42d119;map[_0x12940a(0x8f)](_0x12940a(0x80),_0x23b05b);}),map[_0x569e5c(0x74)](_0x569e5c(0x89),{'type':_0x569e5c(0x87),'data':{'type':'FeatureCollection','features':[]},'cluster':!![],'clusterMaxZoom':0xe,'clusterRadius':0x32}),d3[_0x569e5c(0x71)](_0x569e5c(0x6f))['then'](_0x30551b=>{const _0x1fa142=_0x569e5c;console[_0x1fa142(0x7d)](_0x1fa142(0x93),_0x30551b);const _0x109ad5=_0x30551b[_0x1fa142(0x85)](_0x299a26=>{const _0x473f8e=_0x1fa142;return turf[_0x473f8e(0x91)]([+_0x299a26[_0x473f8e(0x70)],+_0x299a26['lat']]);});var _0x2d7b4c=turf[_0x1fa142(0x8a)](_0x109ad5);console['log'](_0x1fa142(0x79),_0x2d7b4c),map[_0x1fa142(0x6e)](_0x1fa142(0x89))[_0x1fa142(0x88)](_0x2d7b4c);}),map[_0x569e5c(0x81)]({'id':_0x569e5c(0x8e),'type':'circle','source':_0x569e5c(0x89),'filter':[_0x569e5c(0x98),_0x569e5c(0x6c)],'paint':{'circle-color':[_0x569e5c(0x6a),[_0x569e5c(0x65),_0x569e5c(0x6c)],_0x569e5c(0x9a),0x64,_0x569e5c(0x7e),0x2ee,_0x569e5c(0x7a)],'circle-radius':[_0x569e5c(0x6a),['get',_0x569e5c(0x6c)],0x14,0x64,0x1e,0x2ee,0x28]}}),map[_0x569e5c(0x81)]({'id':_0x569e5c(0x8c),'type':'symbol','source':_0x569e5c(0x89),'filter':[_0x569e5c(0x98),_0x569e5c(0x6c)],'layout':{'text-field':_0x569e5c(0x8d),'text-font':['DIN\x20Offc\x20Pro\x20Medium',_0x569e5c(0x92)],'text-size':0xc}}),map['addLayer']({'id':_0x569e5c(0x86),'type':_0x569e5c(0x99),'source':_0x569e5c(0x89),'filter':['!',[_0x569e5c(0x98),_0x569e5c(0x6c)]],'paint':{'circle-color':_0x569e5c(0x94),'circle-radius':0x4,'circle-stroke-width':0x1,'circle-stroke-color':_0x569e5c(0x73)}}),map[_0x569e5c(0x81)]({'id':_0x569e5c(0x7c),'type':_0x569e5c(0x64),'source':_0x569e5c(0x89),'filter':['!',[_0x569e5c(0x98),'point_count']],'layout':{'icon-image':_0x569e5c(0x80),'icon-size':0.1,'icon-allow-overlap':!![]}}),map['on'](_0x569e5c(0x6b),'clusters',_0x2d6507=>{const _0x52e7ee=_0x569e5c,_0x1bc3bf=map['queryRenderedFeatures'](_0x2d6507[_0x52e7ee(0x91)],{'layers':[_0x52e7ee(0x8e)]}),_0x4636db=_0x1bc3bf[0x0][_0x52e7ee(0x84)][_0x52e7ee(0x69)];map['getSource']('earthquakes')['getClusterExpansionZoom'](_0x4636db,(_0x4a8d5a,_0xb0393a)=>{const _0x1b0255=_0x52e7ee;if(_0x4a8d5a)return;map[_0x1b0255(0x7b)]({'center':_0x1bc3bf[0x0][_0x1b0255(0x6d)][_0x1b0255(0x82)],'zoom':_0xb0393a});});});});
    </script>

</body>

</html>