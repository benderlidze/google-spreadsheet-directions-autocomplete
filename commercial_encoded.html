<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Create and style clusters</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>

    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>

<body>
    <div id="map"></div>

    <script>
       const _0x1b13ce=_0x4339;(function(_0x4b2d49,_0x1892cd){const _0x325c08=_0x4339,_0x509f16=_0x4b2d49();while(!![]){try{const _0x21a275=-parseInt(_0x325c08(0x1ee))/0x1*(parseInt(_0x325c08(0x1dd))/0x2)+-parseInt(_0x325c08(0x1f0))/0x3*(parseInt(_0x325c08(0x1e6))/0x4)+-parseInt(_0x325c08(0x1f1))/0x5*(parseInt(_0x325c08(0x1ec))/0x6)+-parseInt(_0x325c08(0x1ff))/0x7*(parseInt(_0x325c08(0x1e3))/0x8)+-parseInt(_0x325c08(0x1dc))/0x9*(-parseInt(_0x325c08(0x1e7))/0xa)+-parseInt(_0x325c08(0x1ef))/0xb+parseInt(_0x325c08(0x204))/0xc;if(_0x21a275===_0x1892cd)break;else _0x509f16['push'](_0x509f16['shift']());}catch(_0xe9525){_0x509f16['push'](_0x509f16['shift']());}}}(_0x37b3,0x3dd2d),mapboxgl['accessToken']='pk.eyJ1Ijoic2VyZ2JlciIsImEiOiJja3dwOWgzeGQwYWdyMm9xb2pkMDFvYmNuIn0.H9AJ_NLmDNYMed6dvu_Q0A');const map=new mapboxgl[(_0x1b13ce(0x1e5))]({'container':'map','style':_0x1b13ce(0x1de),'center':{'lng':-73.13418432616481,'lat':40.71282821016831},'zoom':0x8});function _0x37b3(){const _0x964d81=['4933oSuAkG','2278001IbjahT','121026znasAD','148575NXlERb','earthquakes','coordinates','#11b4da','circle','easeTo','csv','step','points','get','collection','#f28cb1','#51bbd6','symbol','4774ROccEM','cluster-count','{point_count_abbreviated}','map','has','16563444vMSlyk','Arial\x20Unicode\x20MS\x20Bold','sun','clusters','geojson','log','getSource','point_count','click','cluster_id','addLayer','point','1930986MGcebc','182kwySCQ','mapbox://styles/mapbox/satellite-v9','geometry','addImage','#fff','FeatureCollection','2840iBYMJZ','locations','Map','24VBmuPk','20DTHEuw','lat','DIN\x20Offc\x20Pro\x20Medium','load','then','84EswIdq','properties'];_0x37b3=function(){return _0x964d81;};return _0x37b3();}function _0x4339(_0xa3a1cb,_0x2fabd2){const _0x37b3dc=_0x37b3();return _0x4339=function(_0x43392e,_0x1f346c){_0x43392e=_0x43392e-0x1d2;let _0x3d3b6d=_0x37b3dc[_0x43392e];return _0x3d3b6d;},_0x4339(_0xa3a1cb,_0x2fabd2);}map['on'](_0x1b13ce(0x1ea),()=>{const _0x4f0e80=_0x1b13ce;map['loadImage']('icons/sun_blue.png',(_0x5d1e34,_0x4dc99d)=>{const _0x140265=_0x4339;if(_0x5d1e34)throw _0x5d1e34;map[_0x140265(0x1e0)](_0x140265(0x1d2),_0x4dc99d);}),map['addSource'](_0x4f0e80(0x1f2),{'type':_0x4f0e80(0x1d4),'data':{'type':_0x4f0e80(0x1e2),'features':[]},'cluster':!![],'clusterMaxZoom':0xe,'clusterRadius':0x32}),d3[_0x4f0e80(0x1f7)]('https://docs.google.com/spreadsheets/d/e/2PACX-1vQGbPNuYOqo7nyAlNzBeJQMiH1mx-8nw1eDFynubOIACgPSiCppTgA6JSlSsC5V7w/pub?output=csv')[_0x4f0e80(0x1eb)](_0x57277e=>{const _0x1acf53=_0x4f0e80;console['log'](_0x1acf53(0x1e4),_0x57277e);const _0x14c216=_0x57277e[_0x1acf53(0x202)](_0x46b51f=>{const _0x371296=_0x1acf53;return turf[_0x371296(0x1db)]([+_0x46b51f['lng'],+_0x46b51f[_0x371296(0x1e8)]]);});var _0x4de3a2=turf['featureCollection'](_0x14c216);console[_0x1acf53(0x1d5)](_0x1acf53(0x1fb),_0x4de3a2),map[_0x1acf53(0x1d6)]('earthquakes')['setData'](_0x4de3a2);}),map[_0x4f0e80(0x1da)]({'id':_0x4f0e80(0x1d3),'type':_0x4f0e80(0x1f5),'source':_0x4f0e80(0x1f2),'filter':[_0x4f0e80(0x203),_0x4f0e80(0x1d7)],'paint':{'circle-color':[_0x4f0e80(0x1f8),[_0x4f0e80(0x1fa),_0x4f0e80(0x1d7)],_0x4f0e80(0x1fd),0x64,'#f1f075',0x2ee,_0x4f0e80(0x1fc)],'circle-radius':[_0x4f0e80(0x1f8),['get',_0x4f0e80(0x1d7)],0x14,0x64,0x1e,0x2ee,0x28]}}),map[_0x4f0e80(0x1da)]({'id':_0x4f0e80(0x200),'type':_0x4f0e80(0x1fe),'source':_0x4f0e80(0x1f2),'filter':[_0x4f0e80(0x203),'point_count'],'layout':{'text-field':_0x4f0e80(0x201),'text-font':[_0x4f0e80(0x1e9),_0x4f0e80(0x205)],'text-size':0xc}}),map[_0x4f0e80(0x1da)]({'id':'unclustered-point','type':_0x4f0e80(0x1f5),'source':'earthquakes','filter':['!',[_0x4f0e80(0x203),_0x4f0e80(0x1d7)]],'paint':{'circle-color':_0x4f0e80(0x1f4),'circle-radius':0x4,'circle-stroke-width':0x1,'circle-stroke-color':_0x4f0e80(0x1e1)}}),map[_0x4f0e80(0x1da)]({'id':_0x4f0e80(0x1f9),'type':_0x4f0e80(0x1fe),'source':_0x4f0e80(0x1f2),'filter':['!',[_0x4f0e80(0x203),_0x4f0e80(0x1d7)]],'layout':{'icon-image':'sun','icon-size':0.1,'icon-allow-overlap':!![]}}),map['on'](_0x4f0e80(0x1d8),_0x4f0e80(0x1d3),_0x6aee58=>{const _0x4bca75=_0x4f0e80,_0x507d5a=map['queryRenderedFeatures'](_0x6aee58[_0x4bca75(0x1db)],{'layers':[_0x4bca75(0x1d3)]}),_0x5c262c=_0x507d5a[0x0][_0x4bca75(0x1ed)][_0x4bca75(0x1d9)];map[_0x4bca75(0x1d6)](_0x4bca75(0x1f2))['getClusterExpansionZoom'](_0x5c262c,(_0x50caf4,_0x5870ae)=>{const _0x494c02=_0x4bca75;if(_0x50caf4)return;map[_0x494c02(0x1f6)]({'center':_0x507d5a[0x0][_0x494c02(0x1df)][_0x494c02(0x1f3)],'zoom':_0x5870ae});});});});
    </script>

</body>

</html>